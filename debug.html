<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>COMBO問題分析</title>
</head>
<body>
    <h1>COMBO表示が出ない原因の分析</h1>
    
    <h2>考えられる原因：</h2>
    <ol>
        <li>
            <strong>ストリークがリセットされている</strong>
            <ul>
                <li>問題を表示する度にストリークが0になっている可能性</li>
                <li>モード切り替え時にリセットされている可能性</li>
                <li>「次の問題へ」ボタンでリセットされている可能性</li>
            </ul>
        </li>
        
        <li>
            <strong>ストリークが保存されていない</strong>
            <ul>
                <li>LocalStorageへの保存タイミングの問題</li>
                <li>ページリロード時に消えている</li>
            </ul>
        </li>
        
        <li>
            <strong>条件判定の問題</strong>
            <ul>
                <li>app.streak > 1 の条件が満たされない</li>
                <li>連続正解してもストリークが1のまま</li>
            </ul>
        </li>
        
        <li>
            <strong>表示の問題</strong>
            <ul>
                <li>HTMLは生成されているが表示されない</li>
                <li>CSSで隠れている</li>
                <li>他の要素に上書きされている</li>
            </ul>
        </li>
    </ol>
    
    <h2>デバッグ手順：</h2>
    <button onclick="testStreak()">ストリークテスト</button>
    <div id="result"></div>
    
    <script>
        let testStreakValue = 0;
        
        function testStreak() {
            testStreakValue++;
            const resultDiv = document.getElementById('result');
            
            if (testStreakValue > 1) {
                resultDiv.innerHTML = `
                    <h3>ストリーク: ${testStreakValue}</h3>
                    <div style="font-size: 1.5em; color: #ff6b35; font-weight: bold;">
                        🔥 ${testStreakValue} COMBO!!
                    </div>
                `;
            } else {
                resultDiv.innerHTML = `<h3>ストリーク: ${testStreakValue}</h3>`;
            }
            
            console.log('Test Streak:', testStreakValue);
        }
    </script>
</body>
</html>