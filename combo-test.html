<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>COMBOå‹•ä½œç¢ºèªãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
        }
        .result-box {
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            text-align: center;
            font-size: 18px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .result-box.correct {
            background: linear-gradient(135deg, #34c759, #30d158);
            color: white;
        }
        .result-box.incorrect {
            background: linear-gradient(135deg, #ff3b30, #ff453a);
            color: white;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            font-size: 16px;
            cursor: pointer;
        }
        .info {
            background: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>COMBOæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h1>
    
    <div class="info">
        <p><strong>ç¾åœ¨ã®ã‚¹ãƒˆãƒªãƒ¼ã‚¯:</strong> <span id="currentStreak">0</span></p>
        <p><strong>æœ€é«˜ã‚¹ãƒˆãƒªãƒ¼ã‚¯:</strong> <span id="maxStreak">0</span></p>
        <p><strong>ç²å¾—ãƒã‚¤ãƒ³ãƒˆåˆè¨ˆ:</strong> <span id="totalPoints">0</span></p>
    </div>
    
    <div>
        <button onclick="answerCorrect()">æ­£è§£ã™ã‚‹</button>
        <button onclick="answerIncorrect()">ä¸æ­£è§£ã™ã‚‹</button>
        <button onclick="resetTest()">ãƒªã‚»ãƒƒãƒˆ</button>
    </div>
    
    <div id="result" class="result-box" style="display: none;"></div>
    
    <h2>ãƒ­ã‚°ï¼š</h2>
    <div id="log" style="background: #f9f9f9; padding: 10px; border: 1px solid #ddd; height: 200px; overflow-y: auto;"></div>
    
    <script>
        let streak = 0;
        let maxStreak = 0;
        let totalPoints = 0;
        
        function addLog(message) {
            const logDiv = document.getElementById('log');
            const time = new Date().toLocaleTimeString();
            logDiv.innerHTML += `[${time}] ${message}<br>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        function updateDisplay() {
            document.getElementById('currentStreak').textContent = streak;
            document.getElementById('maxStreak').textContent = maxStreak;
            document.getElementById('totalPoints').textContent = totalPoints;
        }
        
        function answerCorrect() {
            // ã‚¹ãƒˆãƒªãƒ¼ã‚¯æ›´æ–°
            streak++;
            addLog(`æ­£è§£ï¼ã‚¹ãƒˆãƒªãƒ¼ã‚¯: ${streak - 1} â†’ ${streak}`);
            
            if (streak > maxStreak) {
                maxStreak = streak;
                addLog(`æœ€é«˜è¨˜éŒ²æ›´æ–°ï¼`);
            }
            
            // ãƒã‚¤ãƒ³ãƒˆè¨ˆç®—
            let points = 1;
            if (streak > 1) {
                const effectiveStreak = Math.min(streak, 4);
                points = Math.pow(2, effectiveStreak - 1);
                addLog(`ãƒœãƒ¼ãƒŠã‚¹ãƒã‚¤ãƒ³ãƒˆè¨ˆç®—: ${effectiveStreak}é€£ç¶š = ${points}ãƒã‚¤ãƒ³ãƒˆ`);
            }
            
            totalPoints += points;
            
            // çµæœè¡¨ç¤º
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'flex';
            resultDiv.className = 'result-box correct';
            
            if (streak > 1) {
                const comboText = `ğŸ‰ æ­£è§£ï¼ ğŸ”¥ ${streak} COMBO!! +${points}ãƒã‚¤ãƒ³ãƒˆç²å¾—ï¼`;
                resultDiv.textContent = comboText;
                addLog(`COMBOè¡¨ç¤º: "${comboText}"`);
            } else {
                const normalText = `ğŸ‰ æ­£è§£ï¼ +1ãƒã‚¤ãƒ³ãƒˆç²å¾—`;
                resultDiv.textContent = normalText;
                addLog(`é€šå¸¸è¡¨ç¤º: "${normalText}"`);
            }
            
            updateDisplay();
        }
        
        function answerIncorrect() {
            addLog(`ä¸æ­£è§£... ã‚¹ãƒˆãƒªãƒ¼ã‚¯: ${streak} â†’ 0`);
            streak = 0;
            
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'flex';
            resultDiv.className = 'result-box incorrect';
            resultDiv.textContent = 'âŒ ä¸æ­£è§£';
            
            updateDisplay();
        }
        
        function resetTest() {
            streak = 0;
            maxStreak = 0;
            totalPoints = 0;
            document.getElementById('result').style.display = 'none';
            document.getElementById('log').innerHTML = '';
            addLog('ãƒ†ã‚¹ãƒˆã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ');
            updateDisplay();
        }
        
        // åˆæœŸè¡¨ç¤º
        updateDisplay();
        addLog('ãƒ†ã‚¹ãƒˆé–‹å§‹ - ã€Œæ­£è§£ã™ã‚‹ã€ã‚’2å›é€£ç¶šã§ã‚¯ãƒªãƒƒã‚¯ã—ã¦COMBOã‚’ç¢ºèªã—ã¦ãã ã•ã„');
    </script>
</body>
</html>