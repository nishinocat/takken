<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®…å»ºã‚¢ãƒ—ãƒª - æœ€çµ‚å“è³ªãƒã‚§ãƒƒã‚¯</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .test-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px;
        }
        .test-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 5px;
        }
        .test-item {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
        }
        .status-ok {
            color: #4CAF50;
            font-weight: bold;
        }
        .status-ng {
            color: #f44336;
            font-weight: bold;
        }
        .combo-test-area {
            background: linear-gradient(135deg, #34c759, #30d158);
            padding: 20px;
            border-radius: 10px;
            margin: 20px;
            color: white;
            text-align: center;
        }
        .test-button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        .test-button:hover {
            background: #45a049;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 style="text-align: center; margin: 20px 0;">ğŸ¯ å®…å»ºã‚¢ãƒ—ãƒª - æœ€çµ‚å“è³ªãƒã‚§ãƒƒã‚¯</h1>
        
        <!-- COMBOè¡¨ç¤ºãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <div class="test-title">ğŸ“Š COMBOè¡¨ç¤ºãƒ†ã‚¹ãƒˆ</div>
            <div class="test-item">
                <p>ç¾åœ¨ã®ã‚¹ãƒˆãƒªãƒ¼ã‚¯: <span id="streakCount" style="font-weight: bold;">0</span></p>
                <button class="test-button" onclick="simulateCorrect()">æ­£è§£ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ</button>
                <button class="test-button" onclick="simulateIncorrect()">ä¸æ­£è§£ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ</button>
                <button class="test-button" onclick="resetTest()">ãƒªã‚»ãƒƒãƒˆ</button>
            </div>
            <div id="comboDisplay" class="combo-test-area">
                <div>çµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</div>
            </div>
        </div>

        <!-- PC/ãƒ¢ãƒã‚¤ãƒ«è¡¨ç¤ºãƒã‚§ãƒƒã‚¯ -->
        <div class="test-section">
            <div class="test-title">ğŸ“± ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–è¡¨ç¤ºãƒã‚§ãƒƒã‚¯</div>
            <div class="test-item">
                <p>ç¾åœ¨ã®ç”»é¢å¹…: <span id="screenWidth"></span>px</p>
                <p>ãƒ‡ãƒã‚¤ã‚¹åˆ¤å®š: <span id="deviceType"></span></p>
                <p id="mobileCheck"></p>
            </div>
        </div>

        <!-- é‡ãªã‚Šãƒã‚§ãƒƒã‚¯ -->
        <div class="test-section">
            <div class="test-title">ğŸ” æ–‡å­—é‡ãªã‚Šãƒã‚§ãƒƒã‚¯</div>
            <div id="overlapCheck" class="test-item">
                <p>ãƒã‚§ãƒƒã‚¯ä¸­...</p>
            </div>
        </div>

        <!-- æ©Ÿèƒ½å‹•ä½œãƒã‚§ãƒƒã‚¯ -->
        <div class="test-section">
            <div class="test-title">âš™ï¸ æ©Ÿèƒ½å‹•ä½œãƒã‚§ãƒƒã‚¯</div>
            <div class="test-item">
                <p>âœ… LocalStorageä¿å­˜: <span id="storageCheck"></span></p>
                <p>âœ… ãƒã‚¤ãƒ³ãƒˆè¨ˆç®—: <span id="pointCheck"></span></p>
                <p>âœ… ãƒ¬ãƒ™ãƒ«ã‚·ã‚¹ãƒ†ãƒ : <span id="levelCheck"></span></p>
                <p>âœ… æ—¥ä»˜è¨ˆç®—: <span id="dateCheck"></span></p>
            </div>
        </div>

        <!-- ç·åˆè©•ä¾¡ -->
        <div class="test-section" style="background: #e3f2fd;">
            <div class="test-title">ğŸ“‹ ç·åˆè©•ä¾¡</div>
            <div id="finalReport" class="test-item">
                <p>è©•ä¾¡ä¸­...</p>
            </div>
        </div>
    </div>

    <script>
        // ãƒ†ã‚¹ãƒˆç”¨å¤‰æ•°
        let testStreak = 0;
        let issues = [];

        // COMBOè¡¨ç¤ºãƒ†ã‚¹ãƒˆï¼ˆæœ¬ç•ªã¨åŒã˜ãƒ­ã‚¸ãƒƒã‚¯ï¼‰
        function simulateCorrect() {
            testStreak++;
            document.getElementById('streakCount').textContent = testStreak;
            
            const resultDiv = document.getElementById('comboDisplay');
            
            // ãƒã‚¤ãƒ³ãƒˆè¨ˆç®—ï¼ˆæœ¬ç•ªã¨åŒã˜ï¼‰
            let points = 1;
            if (testStreak > 1) {
                const effectiveStreak = Math.min(testStreak, 4);
                points = Math.pow(2, effectiveStreak - 1);
            }
            
            // COMBOè¡¨ç¤ºï¼ˆæœ¬ç•ªã¨åŒã˜ã‚³ãƒ¼ãƒ‰ï¼‰
            const displayStreak = Math.min(testStreak, 99);
            
            if (testStreak > 1) {
                resultDiv.innerHTML = `
                    <div style="display: block !important; font-size: 1em !important; margin-bottom: 5px !important; color: white !important;">ğŸ‰ æ­£è§£ï¼</div>
                    <div style="display: block !important; font-size: 1.8em !important; color: #ff6b35 !important; font-weight: bold !important; text-shadow: 1px 1px 2px rgba(0,0,0,0.3) !important; line-height: 1.2 !important;">
                        ğŸ”¥ ${displayStreak} COMBO!!
                    </div>
                    <div style="display: block !important; font-size: 1.1em !important; margin-top: 5px !important; color: white !important;">+${points}ãƒã‚¤ãƒ³ãƒˆç²å¾—ï¼</div>
                `;
                console.log(`COMBOè¡¨ç¤º: ${displayStreak} COMBO!! (+${points}ãƒã‚¤ãƒ³ãƒˆ)`);
            } else {
                resultDiv.innerHTML = `
                    <div style="display: block !important; font-size: 1.1em !important; color: white !important;">ğŸ‰ æ­£è§£ï¼</div>
                    <div style="display: block !important; font-size: 1em !important; margin-top: 5px !important; color: white !important;">+1ãƒã‚¤ãƒ³ãƒˆç²å¾—</div>
                `;
            }
        }

        function simulateIncorrect() {
            testStreak = 0;
            document.getElementById('streakCount').textContent = testStreak;
            
            const resultDiv = document.getElementById('comboDisplay');
            resultDiv.innerHTML = `<div style="font-size: 1.2em;">âŒ ä¸æ­£è§£</div>`;
            resultDiv.style.background = 'linear-gradient(135deg, #ff3b30, #ff453a)';
            
            setTimeout(() => {
                resultDiv.style.background = 'linear-gradient(135deg, #34c759, #30d158)';
            }, 2000);
        }

        function resetTest() {
            testStreak = 0;
            document.getElementById('streakCount').textContent = testStreak;
            document.getElementById('comboDisplay').innerHTML = '<div>çµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</div>';
        }

        // ç”»é¢ã‚µã‚¤ã‚ºãƒã‚§ãƒƒã‚¯
        function checkScreenSize() {
            const width = window.innerWidth;
            document.getElementById('screenWidth').textContent = width;
            
            const deviceType = width <= 768 ? 'ãƒ¢ãƒã‚¤ãƒ«' : 'PC';
            document.getElementById('deviceType').textContent = deviceType;
            document.getElementById('deviceType').className = 'status-ok';
            
            if (width <= 768) {
                document.getElementById('mobileCheck').innerHTML = 
                    '<span class="status-ok">âœ… ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ–ãŒé©ç”¨ã•ã‚Œã¦ã„ã¾ã™</span>';
            } else {
                document.getElementById('mobileCheck').innerHTML = 
                    '<span class="status-ok">âœ… PCè¡¨ç¤ºãŒé©ç”¨ã•ã‚Œã¦ã„ã¾ã™</span>';
            }
        }

        // é‡ãªã‚Šãƒã‚§ãƒƒã‚¯
        function checkOverlap() {
            const overlapDiv = document.getElementById('overlapCheck');
            let hasOverlap = false;
            
            // z-indexãƒã‚§ãƒƒã‚¯
            const elements = document.querySelectorAll('*');
            let zIndexIssues = [];
            
            elements.forEach(el => {
                const style = window.getComputedStyle(el);
                const zIndex = style.zIndex;
                if (zIndex && zIndex !== 'auto' && parseInt(zIndex) < 0) {
                    zIndexIssues.push(el);
                }
            });
            
            if (zIndexIssues.length > 0) {
                hasOverlap = true;
                issues.push('è² ã®z-indexãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ');
            }
            
            if (!hasOverlap) {
                overlapDiv.innerHTML = '<span class="status-ok">âœ… æ–‡å­—ã®é‡ãªã‚Šã¯æ¤œå‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ</span>';
            } else {
                overlapDiv.innerHTML = '<span class="status-ng">âš ï¸ æ½œåœ¨çš„ãªé‡ãªã‚Šå•é¡ŒãŒã‚ã‚Šã¾ã™</span>';
            }
        }

        // æ©Ÿèƒ½ãƒã‚§ãƒƒã‚¯
        function checkFunctions() {
            // LocalStorage
            try {
                localStorage.setItem('test', 'test');
                localStorage.removeItem('test');
                document.getElementById('storageCheck').innerHTML = '<span class="status-ok">æ­£å¸¸å‹•ä½œ</span>';
            } catch(e) {
                document.getElementById('storageCheck').innerHTML = '<span class="status-ng">ã‚¨ãƒ©ãƒ¼</span>';
                issues.push('LocalStorageãŒä½¿ç”¨ã§ãã¾ã›ã‚“');
            }
            
            // ãƒã‚¤ãƒ³ãƒˆè¨ˆç®—ãƒã‚§ãƒƒã‚¯
            const points = [1, 2, 4, 8, 8]; // 1é€£ç¶šã€œ5é€£ç¶šã®ãƒã‚¤ãƒ³ãƒˆ
            let pointCheckOk = true;
            for (let i = 1; i <= 5; i++) {
                const effectiveStreak = Math.min(i, 4);
                const calculatedPoints = i === 1 ? 1 : Math.pow(2, effectiveStreak - 1);
                if (calculatedPoints !== points[i-1]) {
                    pointCheckOk = false;
                    issues.push(`${i}é€£ç¶šæ­£è§£ã®ãƒã‚¤ãƒ³ãƒˆè¨ˆç®—ãŒä¸æ­£: ${calculatedPoints} (æœŸå¾…å€¤: ${points[i-1]})`);
                }
            }
            document.getElementById('pointCheck').innerHTML = pointCheckOk ? 
                '<span class="status-ok">æ­£å¸¸ (1â†’2â†’4â†’8â†’8)</span>' : 
                '<span class="status-ng">ã‚¨ãƒ©ãƒ¼</span>';
            
            // ãƒ¬ãƒ™ãƒ«è¨ˆç®—
            const levelForPoints = (points) => Math.floor(points / 100) + 1;
            const testPoints = [0, 99, 100, 199, 200, 9999];
            const expectedLevels = [1, 1, 2, 2, 3, 100];
            let levelCheckOk = true;
            
            for (let i = 0; i < testPoints.length; i++) {
                const calculated = levelForPoints(testPoints[i]);
                if (calculated !== expectedLevels[i]) {
                    levelCheckOk = false;
                    issues.push(`ãƒ¬ãƒ™ãƒ«è¨ˆç®—ã‚¨ãƒ©ãƒ¼: ${testPoints[i]}ãƒã‚¤ãƒ³ãƒˆâ†’ãƒ¬ãƒ™ãƒ«${calculated} (æœŸå¾…å€¤: ${expectedLevels[i]})`);
                }
            }
            
            document.getElementById('levelCheck').innerHTML = levelCheckOk ? 
                '<span class="status-ok">æ­£å¸¸ (100ãƒã‚¤ãƒ³ãƒˆ/ãƒ¬ãƒ™ãƒ«)</span>' : 
                '<span class="status-ng">ã‚¨ãƒ©ãƒ¼</span>';
            
            // æ—¥ä»˜è¨ˆç®—
            const examDate = new Date('2025-10-19');
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const daysUntil = Math.ceil((examDate - today) / (1000 * 60 * 60 * 24));
            
            document.getElementById('dateCheck').innerHTML = 
                `<span class="status-ok">è©¦é¨“ã¾ã§${daysUntil}æ—¥ (2025å¹´10æœˆ19æ—¥)</span>`;
        }

        // æœ€çµ‚ãƒ¬ãƒãƒ¼ãƒˆ
        function generateReport() {
            const reportDiv = document.getElementById('finalReport');
            
            if (issues.length === 0) {
                reportDiv.innerHTML = `
                    <div style="background: #e8f5e9; padding: 15px; border-radius: 5px; border-left: 4px solid #4CAF50;">
                        <h3 style="color: #2e7d32; margin-top: 0;">âœ… ãƒ‡ãƒ—ãƒ­ã‚¤æº–å‚™å®Œäº†ï¼</h3>
                        <p style="margin: 10px 0;">ã™ã¹ã¦ã®ãƒã‚§ãƒƒã‚¯é …ç›®ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸã€‚</p>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>COMBOè¡¨ç¤º: æ­£å¸¸å‹•ä½œç¢ºèªæ¸ˆã¿ï¼ˆ2é€£ç¶šã‹ã‚‰è¡¨ç¤ºã€æœ€å¤§99è¡¨ç¤ºï¼‰</li>
                            <li>ãƒã‚¤ãƒ³ãƒˆè¨ˆç®—: 1â†’2â†’4â†’8ï¼ˆæœ€å¤§ï¼‰ã§æ­£ã—ãè¨ˆç®—</li>
                            <li>ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–: PC/ãƒ¢ãƒã‚¤ãƒ«ä¸¡å¯¾å¿œ</li>
                            <li>æ–‡å­—é‡ãªã‚Š: å•é¡Œãªã—</li>
                            <li>ãƒ‡ãƒ¼ã‚¿ä¿å­˜: LocalStorageæ­£å¸¸å‹•ä½œ</li>
                        </ul>
                        <p style="color: #1976d2; font-weight: bold; margin-top: 15px;">
                            ğŸš€ 10ä¸‡äººã®å–¶æ¥­æ‹…å½“ã¸ã®é…ä¿¡æº–å‚™ãŒæ•´ã„ã¾ã—ãŸï¼
                        </p>
                    </div>
                `;
            } else {
                reportDiv.innerHTML = `
                    <div style="background: #ffebee; padding: 15px; border-radius: 5px; border-left: 4px solid #f44336;">
                        <h3 style="color: #c62828; margin-top: 0;">âš ï¸ ä¿®æ­£ãŒå¿…è¦ãªé …ç›®ãŒã‚ã‚Šã¾ã™</h3>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            ${issues.map(issue => `<li>${issue}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }
        }

        // åˆæœŸåŒ–
        window.addEventListener('load', () => {
            checkScreenSize();
            checkOverlap();
            checkFunctions();
            generateReport();
        });

        window.addEventListener('resize', checkScreenSize);
        
        // è‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        console.log('=== å“è³ªãƒã‚§ãƒƒã‚¯é–‹å§‹ ===');
        console.log('1. COMBOè¡¨ç¤ºãƒ†ã‚¹ãƒˆ: ã€Œæ­£è§£ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã€ã‚’2å›ã‚¯ãƒªãƒƒã‚¯ã—ã¦COMBOè¡¨ç¤ºã‚’ç¢ºèª');
        console.log('2. ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ†ã‚¹ãƒˆ: ãƒ–ãƒ©ã‚¦ã‚¶å¹…ã‚’å¤‰æ›´ã—ã¦ç¢ºèª');
        console.log('3. ã™ã¹ã¦ã®ãƒã‚§ãƒƒã‚¯é …ç›®ãŒç·‘è‰²ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª');
    </script>
</body>
</html>